### 1. **定義**
   - **SSE** 是一種通過 HTTP 協議從伺服器向客戶端發送實時更新的技術。它允許伺服器在事件發生時主動推送資料給瀏覽器（或其他客戶端）。

### 2. **基於 HTTP 協議**
   - SSE 使用 **HTTP** 協議建立通信，並且依賴於 **TCP/IP 協議** 來實現數據的傳輸。SSE 較為簡單並且只支持單向通信，即從伺服器到客戶端。

### 3. **與 WebSocket 的區別**
   - **SSE** 是單向的：伺服器推送資料到客戶端，無法從客戶端推送資料到伺服器。
   - **WebSocket** 是雙向的：伺服器和客戶端都能進行資料的發送和接收。
   - SSE 比 WebSocket 更適用於簡單的單向即時更新場景，而 WebSocket 則適用於雙向通訊需求。

### 4. **建立 SSE 連接**
   - 客戶端（通常是瀏覽器）使用 **EventSource** API 發送一個 HTTP 請求到伺服器，並設置 `Accept: text/event-stream` 標頭來表明希望接收事件流。
   - 伺服器會保持連接開放，並且可以推送更新數據給客戶端。

### 5. **事件格式**
   - 伺服器向客戶端推送的數據是以事件格式傳輸的。每個事件包含以下基本字段：
     - `data`: 事件的數據（通常是 JSON 格式）。
     - `event`（可選）: 事件名稱。
     - `id`（可選）: 事件 ID，用於標識事件。
     - `retry`（可選）: 設置重新連接的時間間隔（毫秒）。

### 6. **持續連接**
   - **SSE** 支持長時間持久化的連接。伺服器不會立即關閉連接，而是保持它直到需要終止（如超時或顯式關閉）。
   - 如果連接丟失，瀏覽器會自動重試，並根據伺服器提供的 `retry` 設置來重試連接。

### 7. **適用場景**
   - **實時更新**：如股票市場報價、天氣更新、社交媒體通知等。
   - **簡單的單向通知**：適合需要伺服器推送資料的場景，且不需要雙向交互。

### 8. **瀏覽器支援**
   - **內建支援**：大部分現代瀏覽器（包括 Chrome、Firefox、Safari）都原生支援 SSE。
   - **手機瀏覽器**：手機瀏覽器同樣支援 SSE，但要注意不同平台（如 iOS 和 Android）的實現可能有所不同。

### 9. **伺服器支援**
   - SSE 基於 HTTP，伺服器需要能夠處理長時間保持的 HTTP 連接（不關閉連接），並且支持 `text/event-stream` 內容類型。
   - 伺服器在發送事件時需要保持連接開放，並定期向客戶端發送事件數據。

### 10. **重試機制**
   - 當 SSE 連接丟失時，瀏覽器會自動嘗試重新建立連接。這個行為是自動進行的，無需額外配置。
   - 伺服器可以使用 `retry` 設置來指示瀏覽器在多長時間後重試連接。

### 11. **與 RESTful API 配合**
   - **SSE** 可以與現有的 RESTful API 一起使用。RESTful API 用於請求和接收數據，而 SSE 用於即時推送更新。
   - 一般情況下，RESTful API 用來請求數據，而 SSE 則用來推送事件流（如通知或實時更新）。

### 12. **TCP 和 HTTP**
   - **SSE** 實際上是基於 **TCP/IP** 協議的 HTTP 連接來進行通信，這意味著 SSE 的底層是建立在 TCP 連接之上的。
   - 使用 **HTTP/1.1** 協議時，SSE 會保持長時間的持久連接。如果使用 **HTTP/2** 協議，則 SSE 也可以在多路復用通道中進行數據傳輸。

### 小結：
- **SSE** 是一種適合單向數據流推送的技術，對於需要實時更新但無需雙向通信的應用非常合適。它基於 HTTP 和 TCP，並提供了一個簡單的、基於文本流的數據推送機制。